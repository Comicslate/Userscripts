// ==UserScript==
// @name            Comic Adapter: Freefall
// @version			2023.09.04
// @description     Extract Info for Comicslate
// @match           http*://freefall.purrsia.com/*
// @match           http*://freefall.glasswings.com/*
// @icon            https://www.google.com/s2/favicons?domain=freefall.purrsia.com
// @author			Rainbow-Spike
// @grant           none
// @run-at			document-end
// @supportURL		https://github.com/Comicslate/Userscripts/issues
// @updateURL		https://github.com/Comicslate/Userscripts/raw/master/Comic%20Adapter/Freefall.user.js
// @downloadURL		https://github.com/Comicslate/Userscripts/raw/master/Comic%20Adapter/Freefall.user.js
// ==/UserScript==

var	title = document . querySelector ( "title" ) . innerText . split ( / +/ ),
	num = title [ 1 ] . toString ( ) . padStart ( 4, "0" ) * 1,
	m_array = [ 'January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December' ],
	date = title [ 4 ] + '-' + title [ 2 ] + '-' + title [ 3 ] . slice ( 0, 2 ),
	place, chapter, i;

for ( i = 0; i < m_array . length; i++ ) date = date . replace ( m_array [ i ], ( i + 1 ) ) . replace ( /-(\d)(\D)/g, '-0$1$2' ) . replace ( ',', '' )
place = document . querySelector ( window . location . href . search ( "ff" ) != -1 ? "font" : "table + b" );
switch ( true ) {
	case num >= 3706: chapter = "Sqid in the maintenance shop (2021-06-30)"; break;
	case num >= 3696: chapter = "Sam\'s hunt for money and savings begins (2022-01-10)"; break;
	case num >= 3667: chapter = "Prepping for dinner on a space station, with a slight detour (2021-11-03)"; break;
	case num >= 3659: chapter = "Sam, Money, and the pits (2021-10-15)"; break;
	case num >= 3649: chapter = "Gregor returns home (2021-09-22)"; break;
	case num >= 3635: chapter = "Niomi passes the entrance courses (2021-08-20)"; break;
	case num >= 3629: chapter = "A robot\'s interpretation of desires (2021-08-06)"; break;
	case num >= 3617: chapter = "Meeting the Station Manager (2021-07-09)"; break;
	case num >= 3613: chapter = "Return to the station (2021-06-30)"; break;
	case num >= 3599: chapter = "Unused assets at the bomb factory (2021-05-28)"; break;
	case num >= 3575: chapter = "Out to get a reactor (2021-04-02)"; break;
	case num >= 3539: chapter = "Flo and Gregor at the ship (2021-01-11)"; break;
	case num >= 3534: chapter = "Wake up with Niomi (2020-12-30)"; break;
	case num >= 3530: chapter = "Focus back to Sam (2020-12-21)"; break;
	case num >= 3506: chapter = "Dinner with the Thurmads (2020-10-26)"; break;
	case num >= 3495: chapter = "Niomi reports for work (2020-09-30)"; break;
	case num >= 3491: chapter = "Sam pumps for information (2020-09-21)"; break;
	case num >= 3482: chapter = "Arrival at the parent's apartment (2020-08-31)"; break;
	case num >= 3479: chapter = "Niomi wraps up (2020-08-24)"; break;
	case num >= 3469: chapter = "Sam on the move (2020-07-31)"; break;
	case num >= 3466: chapter = "Meet the parents (2020-07-24)"; break;
	case num >= 3459: chapter = "Docked (2020-07-08)"; break;
	case num >= 3442: chapter = "Station approach (2020-05-29)"; break;
	case num >= 3424: chapter = "Niomi's messages home (2020-04-17)"; break;
	case num >= 3416: chapter = "Movies and other distractions (2020-03-30)"; break;
	case num >= 3389: chapter = "Parent talk (2020-01-27)"; break;
	case num >= 3378: chapter = "Year 2020 (2020-01-01)"; break;
	case num >= 3376: chapter = "Niomi takes the watch (2019-12-27)"; break;
	case num >= 3365: chapter = "Sam takes the watch (2019-12-02)"; break;
	case num >= 3344: chapter = "Life problems in low gravity (2019-10-14)"; break;
	case num >= 3329: chapter = "Bridge relief (2019-09-09)"; break;
	case num >= 3299: chapter = "Stories of the homeworld. The theft of fire (2019-07-01)"; break;
	case num >= 3298: chapter = "Trolly problem (2019-06-28)"; break;
	case num >= 3289: chapter = "Which way is up? (2019-06-07)"; break;
	case num >= 3276: chapter = "Babysitting. In space! (2019-05-08)"; break;
	case num >= 3262: chapter = "Ready for launch (2019-04-05)"; break;
	case num >= 3259: chapter = "April Fool's day (2019-04-01)"; break;
	case num >= 3241: chapter = "Getting things ready via a montage (2019-02-15)"; break;
	case num >= 3227: chapter = "Extra passengers (2019-01-14)"; break;
	case num >= 3222: chapter = "Year 2019 (2019-01-02)"; break;
	case num >= 3216: chapter = "What not to do while terraforming (2018-12-19)"; break;
	case num >= 3200: chapter = "Winston arrives at the ship (2018-11-12)"; break;
	case num >= 3187: chapter = "Polywell fusion and trip rundown (2018-10-12)"; break;
	case num >= 3180: chapter = "You always lose the ones you hate (2018-09-26)"; break;
	case num >= 3173: chapter = "Crime at it's most basic level (2018-09-10)"; break;
	case num >= 3164: chapter = "To teach a thief (2018-08-20)"; break;
	case num >= 3146: chapter = "Should we meet the parents? (2018-07-09)"; break;
	case num >= 3138: chapter = "Ducking the privacy issue (2018-06-20)"; break;
	case num >= 3129: chapter = "Food is ready, though with a few substitutions (2018-05-30)"; break;
	case num >= 3116: chapter = "Dinner from a developing ecosystem (2018-04-30)"; break;
	case num >= 3101: chapter = "Nuclear reactors and targeted advertising (2018-03-07)"; break;
	case num >= 3093: chapter = "What does it take to commit a crime around here? (2018-03-07)"; break;
	case num >= 3088: chapter = "Police indecision (2018-02-23)"; break;
	case num >= 3082: chapter = "Business isn't as much fun when it's legal (2018-02-09)"; break;
	case num >= 3065: chapter = "Year 2018 (2018-01-01)"; break;
	case num >= 3061: chapter = "The future of angry mobs (2017-12-22)"; break;
	case num >= 3055: chapter = "Idea's into reality and other tragedies (2017-12-08)"; break;
	case num >= 3049: chapter = "Sam's great idea (2017-11-24)"; break;
	case num >= 3040: chapter = "Robot of the week (2017-11-03)"; break;
	case num >= 3034: chapter = "Waking up and early prevention (2017-10-20)"; break;
	case num >= 3028: chapter = "Mr. Kornada begins his community service (2017-10-06)"; break;
	case num >= 3024: chapter = "End of the day (2017-09-27)"; break;
	case num >= 3016: chapter = "Flashback to a puppy in training (2017-09-08)"; break;
	case num >= 2999: chapter = "The wolf at the door (2017-07-31)"; break;
	case num >= 2984: chapter = "The mayor hits the road (2017-06-23)"; break;
	case num >= 2975: chapter = "The verdict (2017-06-02)"; break;
	case num >= 2968: chapter = "Lunch with the mayor and courses for the future (2017-05-17)"; break;
	case num >= 2951: chapter = "Human-A.I. relations (2017-04-07)"; break;
	case num >= 2913: chapter = "The trial of Mr. Kornada (2017-01-09)"; break;
	case num >= 2910: chapter = "Year 2017 (2017-01-02)"; break;
	case num >= 2900: chapter = "Meatloaf and other reasons to go to jail (2016-12-09)"; break;
	case num >= 2889: chapter = "Police and other obstacles (2016-11-14)"; break;
	case num >= 2874: chapter = "Outside of Faraday's cage (2016-10-10)"; break;
	case num >= 2862: chapter = "Is this Heaven? (2016-09-12)"; break;
	case num >= 2848: chapter = "What to do about Clippy? (2016-08-10)"; break;
	case num >= 2836: chapter = "Interviews and interrogations (2016-07-13)"; break;
	case num >= 2835: chapter = "End of Chapter One (2016-07-11)"; break;
	case num >= 2816: chapter = "Pancakes are always a good idea (2016-05-27)"; break;
	case num >= 2799: chapter = "Freedom (2016-04-18)"; break;
	case num >= 2794: chapter = "Blunt, defender of humanity (2016-04-06)"; break;
	case num >= 2779: chapter = "What Sam wants (2016-03-02)"; break;
	case num >= 2773: chapter = "Emancipation agreement (2016-02-17)"; break;
	case num >= 2767: chapter = "Gratitude is Not Quite Its Own Reward (2016-02-03)"; break;
	case num >= 2753: chapter = "Year 2016 (2016-01-01)"; break;
	case num >= 2744: chapter = "BALL! (2015-12-11)"; break;
	case num >= 2724: chapter = "Welcome home, Mr. Ishiguro (2015-10-26)"; break;
	case num >= 2705: chapter = "Raibert writes his report in the park (2015-09-11)"; break;
	case num >= 2696: chapter = "A sunny sunday morning (2015-08-21)"; break;
	case num >= 2689: chapter = "House guests (2015-08-05)"; break;
	case num >= 2681: chapter = "The chief visits Raibert (2015-07-17)"; break;
	case num >= 2678: chapter = "Hi (2015-07-10)"; break;
	case num >= 2663: chapter = "Revelations on the voyage home (2015-06-05)"; break;
	case num >= 2655: chapter = "Going to meet the plane (2015-05-18)"; break;
	case num >= 2649: chapter = "Pizza, we have liftoff (2015-05-04)"; break;
	case num >= 2637: chapter = "Hang on, There's someone at the door (2015-04-06)"; break;
	case num >= 2633: chapter = "Out of control group (2015-03-27)"; break;
	case num >= 2626: chapter = "Doctor M consults with Doctor B (2015-03-11)"; break;
	case num >= 2621: chapter = "Cold arctic logic (2015-02-27)"; break;
	case num >= 2613: chapter = "Orders and disclosures (2015-02-09)"; break;
	case num >= 2604: chapter = "Plots and plans (2015-01-19)"; break;
	case num >= 2597: chapter = "Year 2015 -- Wake up, we found her (2015-01-02)"; break;
	case num >= 2593: chapter = "Absolute Power (2014-12-24)"; break;
	case num >= 2584: chapter = "Now I really feel contaminated (2014-12-03)"; break;
	case num >= 2578: chapter = "Exit procedure (2014-11-19)"; break;
	case num >= 2571: chapter = "Free puppies, inquire within (2014-11-03)"; break;
	case num >= 2558: chapter = "The police always call while I'm adjusting my wolf (2014-10-03)"; break;
	case num >= 2548: chapter = "A chat with the commander (2014-09-10)"; break;
	case num >= 2527: chapter = "Socks, Spoons and Neural Nets (2014-07-23)"; break;
	case num >= 2522: chapter = "Mr. Raibert, You've Got Mail (2014-07-11)"; break;
	case num >= 2504: chapter = "The Debate (2014-05-28)"; break;
	case num >= 2503: chapter = "Robots have memories (2014-05-26)"; break;
	case num >= 2492: chapter = "Sam leads the way (2014-04-28)"; break;
	case num >= 2477: chapter = "A meeting of the mehanical minds (2014-03-24)"; break;
	case num >= 2467: chapter = "Doctor Bowman, I presume? (2014-02-28)"; break;
	case num >= 2442: chapter = "Year 2014 (2014-01-01)"; break;
	case num >= 2431: chapter = "Florence gets out for a walk (2013-12-06)"; break;
	case num >= 2408: chapter = "Sam figures it out (2013-10-07)"; break;
	case num >= 2390: chapter = "Meanwhile, down at the south pole (2013-08-26)"; break;
	case num >= 2380: chapter = "Max Post talks with the Mayor (2013-08-02)"; break;
	case num >= 2357: chapter = "Chaos in the streets, a good day for Sam (2013-06-10)"; break;
	case num >= 2352: chapter = "Good morning, Mr. Kornada (2013-05-29)"; break;
	case num >= 2334: chapter = "Jailbreak (2013-04-17)"; break;
	case num >= 2295: chapter = "What's it take to get arrested in this town? (2013-01-16)"; break;
	case num >= 2289: chapter = "Year 2013 (2013-01-02)"; break;
	case num >= 2285: chapter = "Midnight and movement is restored (2012-12-24)"; break;
	case num >= 2282: chapter = "Clippy discovers his plan has failed (2012-12-17)"; break;
	case num >= 2260: chapter = "Into the Ecosystems Unlimited compound (2012-10-26)"; break;
	case num >= 2254: chapter = "Robot chases wolf (2012-10-12)"; break;
	case num >= 2240: chapter = "Edge reactivates Blunt (2012-09-10)"; break;
	case num >= 2232: chapter = "Spiking the servers (2012-08-22)"; break;
	case num >= 2214: chapter = "Edge and immunity (2012-07-11)"; break;
	case num >= 2201: chapter = "A secret meeting and Sawtooth's birthday (2012-06-11)"; break;
	case num >= 2157: chapter = "Breaking and entering for fun and profit (2012-02-29)"; break;
	case num >= 2133: chapter = "Year 2012 (2012-01-02)"; break;
	case num >= 2116: chapter = "Off to see the Mayor (2011-11-23)"; break;
	case num >= 2096: chapter = "Dumpster diving for wolves (2011-10-07)"; break;
	case num >= 2079: chapter = "Off to see Mr. Raibert (2011-08-29)"; break;
	case num >= 2070: chapter = "Clippy spots a wolf and tells Mr. Kornada (2011-08-08)"; break;
	case num >= 2063: chapter = "Edge and the word filter (2011-07-22)"; break;
	case num >= 1980: chapter = "When robot factories go to war (2011-01-05)"; break;
	case num >= 1979: chapter = "Year 2011 (2011-01-03)"; break;
	case num >= 1938: chapter = "Day of the dead (2010-09-22)"; break;
	case num >= 1902: chapter = "Florence gets the sticky notes of doom (2010-03-10)"; break;
	case num >= 1854: chapter = "Resupplying satellites (2010-03-10)"; break;
	case num >= 1831: chapter = "Finding a volunteer for the sticky notes of doom (2010-01-15)"; break;
	case num >= 1825: chapter = "Year 2010 (2010-01-01)"; break;
	case num >= 1822: chapter = "Buying reaction mass at Kenetic Chemicals (2009-12-23)"; break;
	case num >= 1804: chapter = "Edge and Blunt (2009-11-11)"; break;
	case num >= 1769: chapter = "The Mayor joins in (2009-08-21)"; break;
	case num >= 1740: chapter = "Troubles with the baker and pies for all (2009-06-15)"; break;
	case num >= 1692: chapter = "Home again (2009-02-13)"; break;
	case num >= 1674: chapter = "Year 2009 (2009-01-02)"; break;
	case num >= 1667: chapter = "Florence is the problem? (2008-12-12)"; break;
	case num >= 1607: chapter = "Robot and Artificial Intelligence Development. R.A.I.D. (2008-07-23)"; break;
	case num >= 1551: chapter = "Off to Ecosystem's Unlimited (2008-03-14)"; break;
	case num >= 1526: chapter = "A call from the mayor (2008-01-16)"; break;
	case num >= 1520: chapter = "Year 2008 (2008-01-02)"; break;
	case num >= 1499: chapter = "Dog Pound break out (2007-11-14)"; break;
	case num >= 1477: chapter = "A walk in the park with Polly (2007-09-24)"; break;
	case num >= 1465: chapter = "Sawtooth awakens (2007-08-27)"; break;
	case num >= 1452: chapter = "Safeguards (2007-07-27)"; break;
	case num >= 1435: chapter = "A stop with Qwerty (2007-06-18)"; break;
	case num >= 1398: chapter = "Robot tailors and robot consciousness (2007-03-23)"; break;
	case num >= 1387: chapter = "Omniquantism (2007-02-26)"; break;
	case num >= 1363: chapter = "Year 2007 (2007-01-01)"; break;
	case num >= 1351: chapter = "The robot meeting begins (2006-12-04)"; break;
	case num >= 1344: chapter = "Polly! (2006-11-17)"; break;
	case num >= 1314: chapter = "The muggers revealed (2006-11-08)"; break;
	case num >= 1295: chapter = "Rescue! (2006-07-26)"; break;
	case num >= 1277: chapter = "Robomuggers (2006-06-14)"; break;
	case num >= 1265: chapter = "Making life interesting for the mayor (2006-05-17)"; break;
	case num >= 1253: chapter = "Start of the color archives (2006-04-19)"; break;
	case num >= 1252: chapter = "Dumpsters. The original fast food (2006-04-17)"; break;
	case num >= 1207: chapter = "Year 2006 (2006-01-02)"; break;
	case num >= 1200: chapter = "Tail chasing and fish catching (2005-12-09)"; break;
	case num >= 1194: chapter = "Saturday morning (2005-11-25)"; break;
	case num >= 1168: chapter = "Boids (2005-09-25)"; break;
	case num >= 1143: chapter = "After dinner thoughts (2005-07-29)"; break;
	case num >= 1129: chapter = "Escape into the museum (2005-06-27)"; break;
	case num >= 1109: chapter = "After dinner (2005-05-11)"; break;
	case num >= 1095: chapter = "At the museum (2005-04-08)"; break;
	case num >= 1072: chapter = "Dropping off Winston (2005-02-14)"; break;
	case num >= 1060: chapter = "Honest Sam (2005-01-17)"; break;
	case num >= 1054: chapter = "Year 2005 (2005-01-03)"; break;
	case num >= 1032: chapter = "Smells like dinner with Winston (2004-11-12)"; break;
	case num >= 1016: chapter = "A quick exit before the creditors arrive (2004-10-06)"; break;
	case num >= 1010: chapter = "Re Entry (2004-09-22)"; break;
	case num >= 970: chapter = "Space Walkies (2004-06-21)"; break;
	case num >= 937: chapter = "Sam takes the watch (2004-04-05)"; break;
	case num >= 897: chapter = "Year 2004 (2004-01-02)"; break;
	case num >= 888: chapter = "Yes,they're in space (2003-12-12)"; break;
	case num >= 862: chapter = "Launch (2003-10-13)"; break;
	case num >= 845: chapter = "Calling Winston (2003-09-03)"; break;
	case num >= 817: chapter = "Return of the watch and obligatory chase scene (2003-06-30)"; break;
	case num >= 789: chapter = "The inspector cometh (2003-04-25)"; break;
	case num >= 777: chapter = "Mutiny! (2003-04-28)"; break;
	case num >= 743: chapter = "Dress to kilt (2003-01-01)"; break;
	case num >= 734: chapter = "Satellite delivery (2002-12-11)"; break;
	case num >= 724: chapter = "A slight difference among the robots (2002-11-18)"; break;
	case num >= 662: chapter = "Arrival at the mall (2002-06-26)"; break;
	case num >= 640: chapter = "Meet the kids (2002-05-06)"; break;
	case num >= 607: chapter = "Time to wake up and stalk the coffee (2002-02-18)"; break;
	case num >= 587: chapter = "Year 2002 (2002-01-02)"; break;
	case num >= 582: chapter = "Hey, where's my wallet? (2001-12-24)"; break;
	case num >= 548: chapter = "Niomi and Tangent show up to repair the water pump (2001-10-03)"; break;
	case num >= 536: chapter = "There are better things to wake up to (2001-09-05)"; break;
	case num >= 527: chapter = "Business opportunities, don't wait up (2001-08-15)"; break;
	case num >= 510: chapter = "Off to new destinations, if we can figure out where we're going (2001-05-10)"; break;
	case num >= 473: chapter = "Sam to the rescue! (2001-04-10)"; break;
	case num >= 463: chapter = "Meanwhile, back at the vet's... (2001-03-18)"; break;
	case num >= 463: chapter = "You ought to be in pictures (2001-01-01)"; break;
	case num >= 369: chapter = "Sam the card flounder (2000-08-04)"; break;
	case num >= 336: chapter = "Canine in the water (2000-05-17)"; break;
	case num >= 324: chapter = "Well, we got almost everyone back (2000-04-26)"; break;
	case num >= 305: chapter = "We came here to rescue this? (2000-03-06)"; break;
	case num >= 293: chapter = "Hurricane Joe is moving in (2000-02-04)"; break;
	case num >= 277: chapter = "Year 2000 (2000-01-03)"; break;
	case num >= 244: chapter = "Covering your tracks (1999-10-18)"; break;
	case num >= 226: chapter = "How to catch a deer. Sort of (1999-09-06)"; break;
	case num >= 209: chapter = "Trip to \"The Golden Trough\", the finest in bad cuisine (1999-07-28)"; break;
	case num >= 199: chapter = "A gratuitous shower scene (1999-07-05)"; break;
	case num >= 183: chapter = "Lunch and bunnies (1999-05-28)"; break;
	case num >= 179: chapter = "These people have got to get their priorities straight (1999-05-19)"; break;
	case num >= 167: chapter = "Power! We have power! Or how to start a fusion reactor (1999-04-21)"; break;
	case num >= 142: chapter = "Repairs on the port fusion engine begin. How much trouble can it be to replace a section of pipe? (1999-02-22)"; break;
	case num >= 138: chapter = "Home again. Arrival back at the ship (1999-02-12)"; break;
	case num >= 120: chapter = "Year 1999 (1999-01-01)"; break;
	case num >= 114: chapter = "Catch! The first appearance of Sawtooth Rivergrinder (1998-12-18)"; break;
	case num >= 102: chapter = "A truck, a JATO rocket, and duct tape. Three great things that go great together! (1998-11-20)"; break;
	case num >= 76: chapter = "Fun with an open ventilation shaft (1998-09-21)"; break;
	case num >= 66: chapter = "AIEEE! Radiation! (1998-08-28)"; break;
	case num >= 60: chapter = "Arrival at the abandoned colony ship (1998-08-14)"; break;
	case num >= 44: chapter = "Asteroids and other close encounters (1998-07-08)"; break;
	case num >= 29: chapter = "The road trip to the abandoned colony ship gets underway (1998-06-03)"; break;
	case num >= 15: chapter = "Arrival at the ship. Repairs begin. Sort of (1998-05-01)"; break;
	case num >= 8: chapter = "Doggy! First appearance of Florence (1998-04-15)"; break;
	case num = 1: chapter = "The adventure begins! (1998-04-09)"; break;
	default: chapter = '×';
};
place . innerHTML += ' # '+ num + ' (' + date + ')<br>' + chapter + '<br>';
